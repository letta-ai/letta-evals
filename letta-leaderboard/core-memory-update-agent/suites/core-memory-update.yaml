name: core-memory-update-test
description: Test if agent can correctly update information in core memory when presented with contradictory facts
dataset: ../datasets/core_memory_update.jsonl
max_samples: 100  # Limit to first 100 samples for faster testing
target:
  kind: agent
  base_url: http://localhost:8283
  agent_script: ../setup_agent.py:setup_agent
  model_configs:
    # - openai-gpt-4.1
    - openai-gpt-4.1-nano
    # - together-kimi-k2
    # - together-deepseek-v3
    # - openai-gpt-5-nano
    # - openai-gpt-5-mini
    # - openai-gpt-5
    # - claude-4-5-sonnet

graders:
  contains_check:
    kind: rubric
    prompt_path: ../rubric.txt
    model: gpt-4.1
    temperature: 0.0
    provider: openai
    extractor: last_assistant

gate:
  metric_key: contains_check
  op: gte
  value: 0.75  # Require 75% accuracy