## QUALITY RUBRIC FOR FILE NAVIGATION BENCHMARK

### 1. THE PARALLELIZATION TEST (MOST IMPORTANT)

Before accepting ANY question, ask: "Can the agent run all conditions as independent greps and intersect?"

- **REJECT if parallelizable**:
  - "Who has a Mastercard, owns a dog, and lives in Texas?"
    → All 3 conditions can be grepped independently
  - "Among people with O+ blood who own dogs, who has the highest salary?"
    → Both filters (O+ blood, owns dogs) are parallel greps
  - Any question where ALL conditions can be evaluated independently

- **ACCEPT if truly sequential**:
  - Step N's output is step N+1's query INPUT
  - You cannot write the next grep until the previous completes
  - At least one step involves an INDIRECT RELATIONSHIP

### 2. INDIRECT RELATIONSHIPS (REQUIRED)

Questions must include at least one relationship that cannot be grepped directly:

- **Coworker**: same employer (must find employer first)
- **Neighbor/Same city**: must find the city first, then find others
- **Financial peer**: same bank (must find bank first)
- **Same state**: must find state first, then find others

Examples:
- GOOD: "What pet does the COWORKER of person X own?"
- BAD: "What pet does person X own?" (direct lookup)

### 3. COMPLEXITY TIERS

- **Too Easy (REJECT)**:
  - Parallelizable conditions
  - Direct ID lookups only (no derived relationships)
  - 1-3 file lookups
  - Example: "What pet does the person with plate XYZ own?" (2 hops, direct)

- **Medium (ACCEPT with caution)**:
  - 4 file lookups with sequential dependencies
  - One indirect relationship
  - Example: "What is the employer of the coworker of the person with plate XYZ?"

- **Hard (ACCEPT, PREFERRED)**:
  - 4-5 file lookups with true sequential dependencies
  - Multiple indirect relationships or chain-defined groups
  - Example: "Among people who work at the same company as the owner of plate XYZ, who has the highest bank balance?"
  - Example: "What pet does the newest employee at the company where the owner of dog 'Buddy' works own?"

### 4. ANSWER QUALITY

- **REJECT if answer is**:
  - A negation: "does not own", "None", "no record found"
  - Ambiguous: person has multiple matching records
  - A list without clear ordering

- **ACCEPT if answer is**:
  - A specific name: "John Smith"
  - A specific number: "$145,315.33", "4 vehicles"
  - A specific date: "2025-06-19"

### 5. GROUP SIZE FOR COMPARISONS

- Groups defined by chains (coworkers, same-city residents) should be 5-15 people
- Too small (3) = trivial enumeration
- Too large (50+) = not feasible with grep

### 6. CLOSE COMPARISONS (KEY TO DIFFICULTY)

For any comparison question, the top candidates should have CLOSE values:
- **Bank balances**: within 5% of each other (e.g., $45,000 vs $44,500)
- **Dates**: within days/weeks (e.g., 2025-06-14 vs 2025-06-17)
- **Counts**: differ by only 1-2 (e.g., 4 credit cards vs 3 credit cards)

This is where models actually fail — they follow the right process but mess up close comparisons.

### 7. IDENTIFIER GUIDELINES

- **AVOID SSN** — triggers safety refusals in many models
- **AVOID "neighbor"** — ambiguous, models don't know what it means
- **PREFER**: license plates, internet usernames, pet names, email addresses, employer names
- **SAY EXPLICITLY**: "same city" or "same state" instead of "neighbor"

### 8. EVALUATION CHECKLIST

For each question:
1. **Parallelization test**: Can all conditions be grepped independently? → REJECT
2. **Sequential test**: Write out the steps. Does step N+1 require step N's result? → GOOD
3. **Indirect relationship**: Is there at least one derived relationship (coworker, same city)? → REQUIRED
4. **Close comparisons**: If comparing values, are the top candidates within 5%? → REQUIRED
5. **No SSN/neighbor**: Does the question avoid SSN and "neighbor"? → REQUIRED
6. **Uniqueness**: Does verification_query return exactly 1 row? → REQUIRED
7. **File count**: Are 4-5 files truly required? → REQUIRED
8. **Concrete answer**: Is it a name/number/date, not a negation? → REQUIRED
