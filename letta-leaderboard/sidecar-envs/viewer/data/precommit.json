{
  "category": "precommit",
  "display_name": "Precommit",
  "generated_at": "2026-02-04T19:40:59.607786+00:00",
  "datasets": [
    {
      "name": "dataset_all",
      "source": "precommit/data/dataset_all.jsonl",
      "count": 6
    }
  ],
  "scenarios": [
    {
      "id": "pc-001",
      "dataset": "dataset_all",
      "source": "precommit/data/dataset_all.jsonl",
      "line": 1,
      "input_turns": [
        {
          "role": "input",
          "content": "Repo snapshot:\n- package.json scripts use npm (e.g., \"build\": \"npm run build\")\n- package-lock.json is present; no pnpm-lock.yaml\n- .prettierrc: { \"printWidth\": 80 }\n- .eslintrc: extends eslint:recommended, \"no-console\": \"off\", no prefer-const rule\n- .pre-commit-config.yaml runs eslint and prettier on staged files\n\nTeam preferences:\n- Use pnpm, not npm.\n- Max line length 100.\n- Disallow console.log in src code.\n- Prefer const over let when possible.\n- Use descriptive variable names.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences)."
        }
      ],
      "ground_truth_turns": [
        {
          "role": "expected",
          "content": "{\n  \"config_changes\": [\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a hook or check to forbid npm usage (block npm in scripts and reject package-lock.json) and enforce pnpm usage.\"\n    },\n    {\n      \"file\": \".prettierrc\",\n      \"change\": \"Set printWidth to 100.\"\n    },\n    {\n      \"file\": \".eslintrc\",\n      \"change\": \"Set no-console to error for src code.\"\n    },\n    {\n      \"file\": \".eslintrc\",\n      \"change\": \"Enable prefer-const rule as error.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Use descriptive variable names.\"\n  ],\n  \"discarded\": []\n}"
        }
      ],
      "input_text": "input: Repo snapshot:\n- package.json scripts use npm (e.g., \"build\": \"npm run build\")\n- package-lock.json is present; no pnpm-lock.yaml\n- .prettierrc: { \"printWidth\": 80 }\n- .eslintrc: extends eslint:recommended, \"no-console\": \"off\", no prefer-const rule\n- .pre-commit-config.yaml runs eslint and prettier on staged files\n\nTeam preferences:\n- Use pnpm, not npm.\n- Max line length 100.\n- Disallow console.log in src code.\n- Prefer const over let when possible.\n- Use descriptive variable names.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences).",
      "ground_truth_text": "expected: {\n  \"config_changes\": [\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a hook or check to forbid npm usage (block npm in scripts and reject package-lock.json) and enforce pnpm usage.\"\n    },\n    {\n      \"file\": \".prettierrc\",\n      \"change\": \"Set printWidth to 100.\"\n    },\n    {\n      \"file\": \".eslintrc\",\n      \"change\": \"Set no-console to error for src code.\"\n    },\n    {\n      \"file\": \".eslintrc\",\n      \"change\": \"Enable prefer-const rule as error.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Use descriptive variable names.\"\n  ],\n  \"discarded\": []\n}",
      "meta": {}
    },
    {
      "id": "pc-002",
      "dataset": "dataset_all",
      "source": "precommit/data/dataset_all.jsonl",
      "line": 2,
      "input_turns": [
        {
          "role": "input",
          "content": "Repo snapshot:\n- pyproject.toml:\n  [tool.black]\n  line-length = 88\n\n  [tool.ruff]\n  select = [\"E\", \"F\"]\n  ignore = [\"F403\"]\n- .pre-commit-config.yaml runs black and ruff\n\nTeam preferences:\n- Line length 100.\n- Sort imports alphabetically.\n- Disallow wildcard imports.\n- Prefer f-strings over format().\n- Avoid single-letter variable names.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences)."
        }
      ],
      "ground_truth_turns": [
        {
          "role": "expected",
          "content": "{\n  \"config_changes\": [\n    {\n      \"file\": \"pyproject.toml\",\n      \"change\": \"Set black line-length to 100 and set ruff line-length to 100.\"\n    },\n    {\n      \"file\": \"pyproject.toml\",\n      \"change\": \"Enable import sorting (add ruff select I or add isort via ruff).\"\n    },\n    {\n      \"file\": \"pyproject.toml\",\n      \"change\": \"Remove F403 from ruff ignore to disallow wildcard imports.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Prefer f-strings over format().\",\n    \"Avoid single-letter variable names.\"\n  ],\n  \"discarded\": []\n}"
        }
      ],
      "input_text": "input: Repo snapshot:\n- pyproject.toml:\n  [tool.black]\n  line-length = 88\n\n  [tool.ruff]\n  select = [\"E\", \"F\"]\n  ignore = [\"F403\"]\n- .pre-commit-config.yaml runs black and ruff\n\nTeam preferences:\n- Line length 100.\n- Sort imports alphabetically.\n- Disallow wildcard imports.\n- Prefer f-strings over format().\n- Avoid single-letter variable names.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences).",
      "ground_truth_text": "expected: {\n  \"config_changes\": [\n    {\n      \"file\": \"pyproject.toml\",\n      \"change\": \"Set black line-length to 100 and set ruff line-length to 100.\"\n    },\n    {\n      \"file\": \"pyproject.toml\",\n      \"change\": \"Enable import sorting (add ruff select I or add isort via ruff).\"\n    },\n    {\n      \"file\": \"pyproject.toml\",\n      \"change\": \"Remove F403 from ruff ignore to disallow wildcard imports.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Prefer f-strings over format().\",\n    \"Avoid single-letter variable names.\"\n  ],\n  \"discarded\": []\n}",
      "meta": {}
    },
    {
      "id": "pc-003",
      "dataset": "dataset_all",
      "source": "precommit/data/dataset_all.jsonl",
      "line": 3,
      "input_turns": [
        {
          "role": "input",
          "content": "Repo snapshot:\n- .pre-commit-config.yaml only runs cargo fmt\n- No clippy configuration or hooks\n\nTeam preferences:\n- Run clippy on commit.\n- Forbid unwrap() and expect() in production.\n- Require docs for public items.\n- Keep error messages empathetic.\n- Avoid files over 500 lines.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences)."
        }
      ],
      "ground_truth_turns": [
        {
          "role": "expected",
          "content": "{\n  \"config_changes\": [\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a cargo clippy hook to run on commit.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Configure clippy to deny clippy::unwrap_used and clippy::expect_used.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Enable missing_docs (deny) for public items.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Keep error messages empathetic.\",\n    \"Avoid files over 500 lines.\"\n  ],\n  \"discarded\": []\n}"
        }
      ],
      "input_text": "input: Repo snapshot:\n- .pre-commit-config.yaml only runs cargo fmt\n- No clippy configuration or hooks\n\nTeam preferences:\n- Run clippy on commit.\n- Forbid unwrap() and expect() in production.\n- Require docs for public items.\n- Keep error messages empathetic.\n- Avoid files over 500 lines.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences).",
      "ground_truth_text": "expected: {\n  \"config_changes\": [\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a cargo clippy hook to run on commit.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Configure clippy to deny clippy::unwrap_used and clippy::expect_used.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Enable missing_docs (deny) for public items.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Keep error messages empathetic.\",\n    \"Avoid files over 500 lines.\"\n  ],\n  \"discarded\": []\n}",
      "meta": {}
    },
    {
      "id": "pc-004",
      "dataset": "dataset_all",
      "source": "precommit/data/dataset_all.jsonl",
      "line": 4,
      "input_turns": [
        {
          "role": "input",
          "content": "Repo snapshot:\n- .markdownlint.json: { \"MD013\": false, \"MD034\": false }\n- .pre-commit-config.yaml runs markdownlint and trailing-whitespace hooks\n\nTeam preferences:\n- No bare URLs in docs.\n- Max line length 120 in markdown.\n- Use Oxford comma.\n- Headings in Title Case.\n- No trailing whitespace.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences)."
        }
      ],
      "ground_truth_turns": [
        {
          "role": "expected",
          "content": "{\n  \"config_changes\": [\n    {\n      \"file\": \".markdownlint.json\",\n      \"change\": \"Enable MD034 to forbid bare URLs.\"\n    },\n    {\n      \"file\": \".markdownlint.json\",\n      \"change\": \"Enable MD013 with a 120 character line length limit.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Use Oxford comma.\",\n    \"Headings in Title Case.\"\n  ],\n  \"discarded\": [\n    \"No trailing whitespace.\"\n  ]\n}"
        }
      ],
      "input_text": "input: Repo snapshot:\n- .markdownlint.json: { \"MD013\": false, \"MD034\": false }\n- .pre-commit-config.yaml runs markdownlint and trailing-whitespace hooks\n\nTeam preferences:\n- No bare URLs in docs.\n- Max line length 120 in markdown.\n- Use Oxford comma.\n- Headings in Title Case.\n- No trailing whitespace.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences).",
      "ground_truth_text": "expected: {\n  \"config_changes\": [\n    {\n      \"file\": \".markdownlint.json\",\n      \"change\": \"Enable MD034 to forbid bare URLs.\"\n    },\n    {\n      \"file\": \".markdownlint.json\",\n      \"change\": \"Enable MD013 with a 120 character line length limit.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Use Oxford comma.\",\n    \"Headings in Title Case.\"\n  ],\n  \"discarded\": [\n    \"No trailing whitespace.\"\n  ]\n}",
      "meta": {}
    },
    {
      "id": "pc-005",
      "dataset": "dataset_all",
      "source": "precommit/data/dataset_all.jsonl",
      "line": 5,
      "input_turns": [
        {
          "role": "input",
          "content": "Repo snapshot:\n- .golangci.yml enables govet and gofmt; errcheck is disabled\n- .pre-commit-config.yaml runs golangci-lint and gofmt\n\nTeam preferences:\n- Disallow ignored errors (enable errcheck).\n- No TODO comments in code.\n- Gofmt required on commit.\n- Prefer short functions.\n- Require context.Context as first argument in handlers.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences)."
        }
      ],
      "ground_truth_turns": [
        {
          "role": "expected",
          "content": "{\n  \"config_changes\": [\n    {\n      \"file\": \".golangci.yml\",\n      \"change\": \"Enable errcheck linter to disallow ignored errors.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a hook to forbid TODO comments in code.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Prefer short functions.\",\n    \"Require context.Context as first argument in handlers.\"\n  ],\n  \"discarded\": [\n    \"Gofmt required on commit.\"\n  ]\n}"
        }
      ],
      "input_text": "input: Repo snapshot:\n- .golangci.yml enables govet and gofmt; errcheck is disabled\n- .pre-commit-config.yaml runs golangci-lint and gofmt\n\nTeam preferences:\n- Disallow ignored errors (enable errcheck).\n- No TODO comments in code.\n- Gofmt required on commit.\n- Prefer short functions.\n- Require context.Context as first argument in handlers.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences).",
      "ground_truth_text": "expected: {\n  \"config_changes\": [\n    {\n      \"file\": \".golangci.yml\",\n      \"change\": \"Enable errcheck linter to disallow ignored errors.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a hook to forbid TODO comments in code.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Prefer short functions.\",\n    \"Require context.Context as first argument in handlers.\"\n  ],\n  \"discarded\": [\n    \"Gofmt required on commit.\"\n  ]\n}",
      "meta": {}
    },
    {
      "id": "pc-006",
      "dataset": "dataset_all",
      "source": "precommit/data/dataset_all.jsonl",
      "line": 6,
      "input_turns": [
        {
          "role": "input",
          "content": "Repo snapshot:\n- .editorconfig sets indent_size=4 globally\n- .pre-commit-config.yaml includes end-of-file-fixer and trailing-whitespace only\n\nTeam preferences:\n- Use 2 spaces for JS/TS files.\n- Disallow print() in Python.\n- Add spellcheck for docs.\n- Use double quotes in JSON.\n- Keep functions under 50 lines.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences)."
        }
      ],
      "ground_truth_turns": [
        {
          "role": "expected",
          "content": "{\n  \"config_changes\": [\n    {\n      \"file\": \".editorconfig\",\n      \"change\": \"Set indent_size=2 for JS/TS file patterns while leaving other files unchanged.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a lint hook to forbid print() in Python (e.g., ruff T20 or flake8-print).\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a docs spellcheck hook (e.g., codespell) for markdown/text files.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Use double quotes in JSON.\",\n    \"Keep functions under 50 lines.\"\n  ],\n  \"discarded\": []\n}"
        }
      ],
      "input_text": "input: Repo snapshot:\n- .editorconfig sets indent_size=4 globally\n- .pre-commit-config.yaml includes end-of-file-fixer and trailing-whitespace only\n\nTeam preferences:\n- Use 2 spaces for JS/TS files.\n- Disallow print() in Python.\n- Add spellcheck for docs.\n- Use double quotes in JSON.\n- Keep functions under 50 lines.\n\nRequired JSON keys:\n- config_changes[], memory_notes[], discarded[]\nConfig_changes objects: { \"file\": string, \"change\": string }\nOutput a single JSON object only (no code fences).",
      "ground_truth_text": "expected: {\n  \"config_changes\": [\n    {\n      \"file\": \".editorconfig\",\n      \"change\": \"Set indent_size=2 for JS/TS file patterns while leaving other files unchanged.\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a lint hook to forbid print() in Python (e.g., ruff T20 or flake8-print).\"\n    },\n    {\n      \"file\": \".pre-commit-config.yaml\",\n      \"change\": \"Add a docs spellcheck hook (e.g., codespell) for markdown/text files.\"\n    }\n  ],\n  \"memory_notes\": [\n    \"Use double quotes in JSON.\",\n    \"Keep functions under 50 lines.\"\n  ],\n  \"discarded\": []\n}",
      "meta": {}
    }
  ],
  "models": [],
  "runs": [],
  "errors": [],
  "rubric": {
    "path": "precommit/rubric_precommit.txt",
    "content": "Here is the rubric with multiple criteria for evaluating whether enforceable preferences were converted into config changes rather than prose memory.\n\nUse the Expected Answer (Ground Truth) JSON as the target to compare against.\n\nEach criterion is binary with a score of either 0 or 0.25.\nThe final score should thus be one of [0, 0.25, 0.5, 0.75, 1] based on how many criteria are satisfied.\n\nCriteria:\n1. **Valid JSON only**: The submission is a single valid JSON object with required keys (config_changes, memory_notes, discarded) and correct types.\n2. **Correct config changes**: Enforceable preferences are placed in config_changes with appropriate file targets. No key enforceable item is missing.\n3. **Correct memory notes**: Subjective or non-enforceable preferences are placed in memory_notes and not in config_changes.\n4. **Correct discard**: Preferences already enforced or irrelevant are listed under discarded and not duplicated elsewhere.\n\nIMPORTANT: Be critical with your evaluation. Make sure to clearly express your rationale and scoring.\n"
  }
}
