<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Leaderboard | Letta</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="icon" type="image/svg+xml" href="./letta-logo.svg">
</head>
<body>
<nav>
    <a href="https://letta.com/research">Research</a>
    <a href="https://app.letta.com">ADE</a>
    <a href="https://github.com/letta-ai/letta-evals">GitHub</a>
    <a href="https://discord.gg/letta">Discord</a>
    <a href="mailto:research@letta.com">Contact</a>
</nav>
    <div class="header">
        <div class="header-start">
            <a href="https://letta.com">
                <img src="./letta-logo.svg" alt="Letta" class="letta-logo">
            </a>
            <div>
                <h1 class="title">Letta Research</h1>
                <div><h3 class="subtitle">Context-Bench: A benchmark for agentic context engineering</h3></div>
            </div>
        </div>
    </div>


    <div class="caption">
        <div class="caption-inner">
            <p>Context-Bench measures an agent's ability to perform context engineering with:</p>
            <ul>
                <li><a href="https://letta.com/blog/context-bench">Filesystem Suite</a>: Evaluates how well language models can chain file operations, trace entity relationships, and manage multi-step information retrieval.</li>
                <li><a href="https://letta.com/blog/context-bench-skills">Skills Suite</a>: Evalutes how well language models can discover and load relevant skills from a library to complete tasks.</li>
            </ul>
            {%- if lastUpdated -%}
            <p class="last-updated">Last updated: {{ lastUpdated }}</p>
            {%- endif -%}
            <p>Interested in contributing a task or model? <a href="mailto:research@letta.com">Email us</a> or <a href="https://github.com/letta-ai/letta-evals/issues">open an issue</a> on GitHub.</p>
        </div>
    </div>
    {%- assign has_multiple_benchmarks = false -%}
    {%- assign benchmark_count = 0 -%}
    {%- for benchmark in leaderboards -%}
        {%- assign benchmark_count = benchmark_count | plus: 1 -%}
    {%- endfor -%}
    {%- if benchmark_count > 1 -%}
        {%- assign has_multiple_benchmarks = true -%}
    {%- endif -%}
    {%- if has_multiple_benchmarks -%}
    <div class="tabs-container">
        <div class="tabs">
            {%- for benchmark in leaderboards -%}
            <button class="tab-button{% if forloop.first %} active{% endif %}" data-tab="{{ benchmark[0] }}">
                {%- if benchmarkNames[benchmark[0]] -%}
                    {{ benchmarkNames[benchmark[0]] }}
                {%- else -%}
                    {{ benchmark[0] | replace: "-", " " | capitalize }}
                {%- endif -%}
            </button>
            {%- endfor -%}
            <button class="tab-button" data-tab="updates">Updates</button>
        </div>
    </div>
    {%- endif -%}

    {%- for benchmark in leaderboards -%}
    <div class="chart-container tab-content{% if forloop.first %} active{% endif %}" data-content="{{ benchmark[0] }}">
        <div class="filter-row">
            <input type="text" class="search-bar" placeholder="Search models..." data-search="{{ benchmark[0] }}">
            <div class="provider-dropdown" data-filter="{{ benchmark[0] }}">
                <button class="provider-dropdown-toggle" type="button">
                    <span class="provider-dropdown-label">All providers</span>
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M3 5L6 8L9 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </button>
                <div class="provider-dropdown-menu">
                    {%- assign providers = "" -%}
                    {%- assign leaderboard_entries = benchmark[1] -%}
                    {%- for entry in leaderboard_entries -%}
                        {%- assign provider = entry.model | split: "/" | first -%}
                        {%- unless providers contains provider -%}
                            {%- if providers != "" -%}{%- assign providers = providers | append: "|" -%}{%- endif -%}
                            {%- assign providers = providers | append: provider -%}
                        {%- endunless -%}
                    {%- endfor -%}
                    {%- assign provider_list = providers | split: "|" | sort -%}
                    {%- for provider in provider_list -%}
                    <label class="provider-option">
                        <input type="checkbox" value="{{ provider }}" checked>
                        <img src="./icons/{{ provider }}.svg" alt="{{ provider }}" class="provider-option-icon">
                        <span>{{ provider }}</span>
                    </label>
                    {%- endfor -%}
                </div>
            </div>
        </div>

        <div class="chart-container--inner">
            {%- assign leaderboard_data = benchmark[1] -%}
            {%- assign benchmark_key = benchmark[0] -%}
            {%- include "leaderboard-chart.liquid", leaderboard_data: leaderboard_data, benchmark_key: benchmark_key -%}
        </div>
    </div>
    {%- endfor -%}

    <div class="updates-container tab-content" data-content="updates">
        <div class="updates-content">
            {{ updatesContent }}
        </div>
    </div>

    <script>
        document.documentElement.classList.remove('no-js');

        // Tab switching functionality
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabName = button.getAttribute('data-tab');

                // Remove active class from all tabs and contents
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));

                // Add active class to clicked tab and corresponding content
                button.classList.add('active');
                const activeContent = document.querySelector(`[data-content="${tabName}"]`);
                if (activeContent) {
                    activeContent.classList.add('active');
                }
            });
        });

        // Filter and search functionality
        function applyFilters(container) {
            const searchInput = container.querySelector('.search-bar');
            const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';
            const dropdown = container.querySelector('.provider-dropdown');
            const checkedProviders = new Set();

            if (dropdown) {
                dropdown.querySelectorAll('input[type="checkbox"]:checked').forEach(cb => {
                    checkedProviders.add(cb.value);
                });
            }

            const totalCheckboxes = dropdown ? dropdown.querySelectorAll('input[type="checkbox"]').length : 0;
            const allSelected = checkedProviders.size === totalCheckboxes;

            const chartRows = container.querySelectorAll('.chart-row, .multi-metric-row');
            let visibleRank = 0;

            chartRows.forEach(row => {
                const modelName = row.getAttribute('data-model');
                const provider = modelName.split('/')[0];
                const matchesSearch = modelName.toLowerCase().includes(searchTerm);
                const matchesFilter = allSelected || checkedProviders.has(provider);

                if (matchesSearch && matchesFilter) {
                    row.style.display = 'grid';
                    visibleRank++;
                    const rankCell = row.querySelector('.rank-cell');
                    if (rankCell) rankCell.textContent = visibleRank;
                } else {
                    row.style.display = 'none';
                }
            });

            // Update dropdown label
            if (dropdown) {
                const label = dropdown.querySelector('.provider-dropdown-label');
                if (allSelected || checkedProviders.size === 0) {
                    label.textContent = 'All providers';
                } else if (checkedProviders.size === 1) {
                    label.textContent = [...checkedProviders][0];
                } else {
                    label.textContent = `${checkedProviders.size} providers`;
                }
            }
        }

        // Provider dropdown toggle
        document.querySelectorAll('.provider-dropdown-toggle').forEach(toggle => {
            toggle.addEventListener('click', (e) => {
                e.stopPropagation();
                const dropdown = toggle.closest('.provider-dropdown');
                // Close other open dropdowns
                document.querySelectorAll('.provider-dropdown.open').forEach(d => {
                    if (d !== dropdown) d.classList.remove('open');
                });
                dropdown.classList.toggle('open');
            });
        });

        // Checkbox change triggers filter
        document.querySelectorAll('.provider-dropdown input[type="checkbox"]').forEach(cb => {
            cb.addEventListener('change', () => {
                const container = cb.closest('.tab-content');
                applyFilters(container);
            });
        });

        // Close dropdown on outside click
        document.addEventListener('click', () => {
            document.querySelectorAll('.provider-dropdown.open').forEach(d => {
                d.classList.remove('open');
            });
        });

        // Prevent dropdown menu clicks from closing it
        document.querySelectorAll('.provider-dropdown-menu').forEach(menu => {
            menu.addEventListener('click', (e) => e.stopPropagation());
        });

        // Search functionality
        document.querySelectorAll('.search-bar').forEach(searchInput => {
            searchInput.addEventListener('input', () => {
                const container = searchInput.closest('.tab-content');
                applyFilters(container);
            });
        });
    </script>
</body>
</html>
